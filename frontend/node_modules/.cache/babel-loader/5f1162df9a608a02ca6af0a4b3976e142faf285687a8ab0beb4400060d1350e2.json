{"ast":null,"code":"import React,{Component}from'react';import axios from'axios';import Main from'../templates/Main';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const headerProps={icon:'users',title:'Usuários',subtitle:'Cadastro de um usuário: Incluir, Listar, Akterar e Excluir'};//const baseUrl = 'http://localhost:3001/users'\nconst baseUrl='https://servidor-node-m8qtin2b8-richard-paivas-projects.vercel.app/users';const initialState={user:{name:'',email:''},list:[]};export default class UserCrud extends Component{constructor(){super(...arguments);this.state={...initialState};}componentWillMount(){axios(baseUrl).then(resp=>{this.setState({list:resp.data});});}clear(){this.setState({user:initialState.user});}save(){const user=this.state.user;const method=user.id?'put':'post';const url=user.id?`${baseUrl}/${user.id}`:baseUrl;axios[method](url,user).then(resp=>{const list=this.getUpdateList(resp.data);this.setState({user:initialState.user,list});});}getUpdateList(user){let add=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const list=this.state.list.filter(u=>u.id!==user.id);if(add)list.unshift(user);return list;}updateField(event){const user={...this.state.user};user[event.target.name]=event.target.value;this.setState({user});}load(user){this.setState({user});}remove(user){axios.delete(`${baseUrl}/${user.id}`).then(resp=>{const list=this.getUpdateList(user,false);this.setState({list});});}renderForm(){return/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"name\",value:this.state.user.name,onChange:e=>this.updateField(e),placeholder:\"Digite o nome...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"email\",value:this.state.user.email,onChange:e=>this.updateField(e),placeholder:\"Digite o e-mail...\"})]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:e=>this.save(e),children:\"salvar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary ml-2\",onClick:e=>this.clear(e),children:\"Cancelar\"})]})})]});}renderTable(){return/*#__PURE__*/_jsxs(\"table\",{className:\"table mt-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"th\",{children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.renderRows()})]});}renderRows(){return this.state.list.map(user=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn warning\",onClick:()=>this.load(user),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ml-2\",onClick:()=>this.remove(user),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]},user.id);});}render(){return/*#__PURE__*/_jsxs(Main,{...headerProps,children:[this.renderForm(),this.renderTable()]});}}","map":{"version":3,"names":["React","Component","axios","Main","jsx","_jsx","jsxs","_jsxs","headerProps","icon","title","subtitle","baseUrl","initialState","user","name","email","list","UserCrud","constructor","arguments","state","componentWillMount","then","resp","setState","data","clear","save","method","id","url","getUpdateList","add","length","undefined","filter","u","unshift","updateField","event","target","value","load","remove","delete","renderForm","className","children","type","onChange","e","placeholder","onClick","renderTable","renderRows","map","render"],"sources":["C:/Users/richa/Documents/pasta-sla/react-crud-user/frontend/src/components/user/UserCrud.jsx"],"sourcesContent":["import React, {Component} from 'react'\r\nimport axios from 'axios'\r\nimport Main from '../templates/Main'\r\n\r\nconst headerProps = {\r\n    icon: 'users',\r\n    title: 'Usuários',\r\n    subtitle: 'Cadastro de um usuário: Incluir, Listar, Akterar e Excluir'\r\n}\r\n\r\n//const baseUrl = 'http://localhost:3001/users'\r\nconst baseUrl = 'https://servidor-node-m8qtin2b8-richard-paivas-projects.vercel.app/users';\r\n\r\nconst initialState = {\r\n    user : {name: '', email:''},\r\n    list:[]\r\n}\r\n\r\nexport default class UserCrud extends Component {\r\n \r\n    state = {...initialState}\r\n\r\n    componentWillMount() {\r\n        axios(baseUrl).then(resp => {\r\n            this.setState({list: resp.data})\r\n        })\r\n    }\r\n\r\n    clear() {\r\n        this.setState({user: initialState.user})\r\n    }\r\n\r\n    save() {\r\n        const user = this.state.user\r\n        const method = user.id ? 'put' : 'post'\r\n        const url = user.id ? `${baseUrl}/${user.id}`: baseUrl\r\n        axios[method](url,user)\r\n            .then(resp => {\r\n                const list = this.getUpdateList(resp.data)\r\n                this.setState({user:initialState.user, list})\r\n            })\r\n    }\r\n\r\n    getUpdateList(user, add = true){\r\n        const list = this.state.list.filter(u => u.id !== user.id)\r\n        if(add) list.unshift(user)\r\n        return list\r\n    }\r\n\r\n    updateField(event) {\r\n        const user = {...this.state.user}\r\n        user[event.target.name] = event.target.value\r\n        this.setState({user})\r\n    }\r\n\r\n    load(user) {\r\n        this.setState({user})\r\n    }\r\n\r\n    remove(user){\r\n        axios.delete(`${baseUrl}/${user.id}`)\r\n            .then(resp => {\r\n                const list = this.getUpdateList(user, false)\r\n                this.setState({list})\r\n            })\r\n    }\r\n\r\n    renderForm() {\r\n        return (\r\n            <div className=\"form\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md-6\">\r\n                        <div className=\"form-group\">\r\n                            <label>Nome</label>\r\n                            <input type=\"text\" \r\n                                className='form-control'\r\n                                name=\"name\"  \r\n                                value={this.state.user.name}\r\n                                onChange={e => this.updateField(e)}  \r\n                                placeholder='Digite o nome...'/>\r\n                        </div>\r\n                    </div>\r\n                    <div className='col-12 col-md-6'>\r\n                        <div className=\"form-group\">\r\n                            <label>E-mail</label>\r\n                            <input type=\"text\" className='form-control'\r\n                             name='email'\r\n                             value={this.state.user.email}\r\n                             onChange={e => this.updateField(e)}\r\n                             placeholder='Digite o e-mail...'/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 d-flex justify-content-end\">\r\n                        <button className=\"btn btn-primary\"\r\n                            onClick={e => this.save(e)}\r\n                        >\r\n                            salvar\r\n                        </button>\r\n                        <button className=\"btn btn-secondary ml-2\"\r\n                            onClick={e => this.clear(e)}>\r\n                            Cancelar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderTable() {\r\n        return (\r\n            <table className=\"table mt-4\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Nome</th>\r\n                        <th>E-mail</th>\r\n                        <th>Ações</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {this.renderRows()}\r\n                </tbody>\r\n            </table>\r\n        )\r\n    }\r\n\r\n    renderRows() {\r\n        return this.state.list.map( user => {\r\n            return(\r\n                <tr key={user.id}>\r\n                    <td>{user.id}</td>\r\n                    <td>{user.name}</td>\r\n                    <td>{user.email}</td>\r\n                    <td>\r\n                        <button className=\"btn warning\"\r\n                            onClick={() => this.load(user)}>\r\n                        <i className=\"fa fa-pencil\"></i>\r\n                        </button>\r\n                    </td>\r\n                    <button className=\"btn btn-danger ml-2\"\r\n                        onClick={() => this.remove(user)}>\r\n                        <i className=\"fa fa-trash\"></i>\r\n                    </button>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Main {...headerProps}>\r\n                {this.renderForm()}\r\n                {this.renderTable()}\r\n            </Main>\r\n        )\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}